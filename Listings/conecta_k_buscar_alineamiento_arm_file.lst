


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         ; Autor ?lvaro L?pez y Pablo Ter?s Pueyo
    3 00000000         
    4 00000000         ;   6 argumnentos:
    5 00000000         ;    r0 t
    6 00000000         ;    r1 fila
    7 00000000         ;    r2 columna
    8 00000000         ;    r3 color
    9 00000000         ;    r4 delta_fila
   10 00000000         ;    r5 delta_columna
   11 00000000         
   12 00000000         ;  Otros registros usados:
   13 00000000         ; r6 = col
   14 00000000         ; r7 = t->columnas[fila][col]
   15 00000000         ; r8 = t->no_ceros[fila][col]
   16 00000000         ; r9 = t->no_ceros[fila][col] == color
   17 00000000         ; r10 = Dirrecion de la fia
   18 00000000         
   19 00000000                 PRESERVE8
   20 00000000                 AREA             datos, DATA, READWRITE
   21 00000000         
   22 00000000 00000001 
                       ERROR   EQU              1
   23 00000000 00000000 
                       EXITO   EQU              0
   24 00000000         
   25 00000000 00000007 
                       MAX_FILA
                               EQU              7
   26 00000000 00000007 
                       MAX_COLUMNA
                               EQU              7
   27 00000000 00000006 
                       MAX_NO_CERO
                               EQU              6
   28 00000000         
   29 00000000 00000031 
                       MAX_TAMANYO_T_COLUMNAS
                               EQU              49
   30 00000000         
   31 00000000                 AREA             codigo, CODE
   32 00000000                 EXPORT           conecta_K_buscar_alineamiento_a
rm
   33 00000000         
   34 00000000         conecta_K_buscar_alineamiento_arm
   35 00000000 E1A0C00D        mov              r12, SP
   36 00000004 E92D4FF0        push{r4-r11,lr}
   37 00000008 E24CB004        sub              r11,r12, #4
   38 0000000C         ; Cogen los valores 0 y -1 (delta fila y columna)
   39 0000000C E59B4004        ldr              r4, [r11, #4] ; Cogemos de la p
                                                            ila el argumento de
                                                            lta_fila
   40 00000010 E59B5008        ldr              r5, [r11, #8] ; Cogemos de la p
                                                            ila el argumento de
                                                            lta_culumna
   41 00000014         
   42 00000014         
   43 00000014         ; Funcion tablero_buscar_color 
   44 00000014 E3510007        cmp              r1, #MAX_FILA



ARM Macro Assembler    Page 2 


   45 00000018 CA000017        bgt              errortag
   46 0000001C E3520007        cmp              r2, #MAX_COLUMNA
   47 00000020 CA000015        bgt              errortag
   48 00000024         
   49 00000024         
   50 00000024 E3A06000        mov              r6,#0       ; col = 0
   51 00000028 E3560006 
                       for     cmp              r6, #MAX_NO_CERO
   52 0000002C AA000007        bge              done
   53 00000030         
   54 00000030 E3A0A006        mov              r10, #6     ; Max No ceros
   55 00000034 E0070A91        mul              r7, r1, r10 ;
   56 00000038 E0877006        add              r7, r7, r6
   57 0000003C E7D07007        ldrb             r7, [r0, r7] ; Cargamos en r7 e
                                                            l valor t->columnas
                                                            [fila][col]
   58 00000040         
   59 00000040 E1570002        cmp              r7, r2      ; t->columnas[fila]
                                                            [col] != columna
   60 00000044         
   61 00000044 0A000001        beq              done
   62 00000048         
   63 00000048 E2866001        add              r6,r6,#1
   64 0000004C EAFFFFF5        b                for
   65 00000050         
   66 00000050         done
   67 00000050         ; Si sale del bucle por iteraciones da error
   68 00000050 E3560006        cmp              r6, #MAX_NO_CERO ; col == MAX_N
                                                            O_CERO
   69 00000054 0A000008        beq              errortag
   70 00000058         
   71 00000058 E0070A91        mul              r7, r1, r10
   72 0000005C E0877006        add              r7, r7, r6
   73 00000060 E2877031        add              r7, r7, #MAX_TAMANYO_T_COLUMNAS
   74 00000064 E7D07007        ldrb             r7, [r0, r7] ; Cargamos en r8 e
                                                            l valor t->no_ceros
                                                            [fila][col]
   75 00000068 E2077003        and              r7, r7, #3
   76 0000006C E1570003        cmp              r7, r3      ; t->no_ceros[fila]
                                                            [col] == color
   77 00000070 1A000001        bne              errortag
   78 00000074         
   79 00000074 E3A09000        mov              r9, #EXITO
   80 00000078 EA000000        b                final_tablero_buscar_color
   81 0000007C         
   82 0000007C         errortag
   83 0000007C E3A09001        mov              r9, #ERROR
   84 00000080         
   85 00000080         
   86 00000080         
   87 00000080         
   88 00000080         
   89 00000080         
   90 00000080         
   91 00000080         ; Salimos de funcion tablero_buscar_color
   92 00000080         
   93 00000080 E3590000 
                       final_tablero_buscar_color
                               cmp              r9, #EXITO



ARM Macro Assembler    Page 3 


   94 00000084 1A000007        bne              retorno_0
   95 00000088         
   96 00000088 E0811004        add              r1, r1, r4  ; delta_fila + 1
   97 0000008C E0822005        add              r2, r2, r5  ; delta_columna + 1
                                                            
   98 00000090         
   99 00000090 E92D43FF        push{r0-r9,lr}
  100 00000094         
  101 00000094 EBFFFFFE        bl               conecta_K_buscar_alineamiento_a
rm
  102 00000098         
  103 00000098 E1A0A000        mov              r10, r0
  104 0000009C E8BD43FF        pop{r0-r9,lr}
  105 000000A0         
  106 000000A0 E28A0001        add              r0, r10, #1 ; 1 + conecta_k_bus
                                                            car_alimento_arm 
  107 000000A4 E8BD8FF0        pop              {r4-r11, pc} ; Recuperamos regi
                                                            stros
  108 000000A8         
  109 000000A8         retorno_0
  110 000000A8 E3A00000        mov              r0, #0
  111 000000AC E8BD8FF0        pop              {r4-r11,pc} ; Recuperamos regis
                                                            tros
  112 000000B0         
  113 000000B0                 END
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\o
bjects\conecta_k_buscar_alineamiento_arm_file.d -o.\objects\conecta_k_buscar_al
ineamiento_arm_file.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include 
-IC:\Keil_v5\ARM\INC\Philips --predefine="__EVAL SETA 1" --predefine="__UVISION
_VERSION SETA 526" --list=.\listings\conecta_k_buscar_alineamiento_arm_file.lst
 conecta_K_buscar_alineamiento_arm_file.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

datos 00000000

Symbol: datos
   Definitions
      At line 20 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      None
Comment: datos unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

codigo 00000000

Symbol: codigo
   Definitions
      At line 31 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      None
Comment: codigo unused
conecta_K_buscar_alineamiento_arm 00000000

Symbol: conecta_K_buscar_alineamiento_arm
   Definitions
      At line 34 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 32 in file conecta_K_buscar_alineamiento_arm_file.s
      At line 101 in file conecta_K_buscar_alineamiento_arm_file.s

done 00000050

Symbol: done
   Definitions
      At line 66 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 52 in file conecta_K_buscar_alineamiento_arm_file.s
      At line 61 in file conecta_K_buscar_alineamiento_arm_file.s

errortag 0000007C

Symbol: errortag
   Definitions
      At line 82 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 45 in file conecta_K_buscar_alineamiento_arm_file.s
      At line 47 in file conecta_K_buscar_alineamiento_arm_file.s
      At line 69 in file conecta_K_buscar_alineamiento_arm_file.s
      At line 77 in file conecta_K_buscar_alineamiento_arm_file.s

final_tablero_buscar_color 00000080

Symbol: final_tablero_buscar_color
   Definitions
      At line 93 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 80 in file conecta_K_buscar_alineamiento_arm_file.s
Comment: final_tablero_buscar_color used once
for 00000028

Symbol: for
   Definitions
      At line 51 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 64 in file conecta_K_buscar_alineamiento_arm_file.s
Comment: for used once
retorno_0 000000A8

Symbol: retorno_0
   Definitions
      At line 109 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 94 in file conecta_K_buscar_alineamiento_arm_file.s
Comment: retorno_0 used once
7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

ERROR 00000001

Symbol: ERROR
   Definitions
      At line 22 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 83 in file conecta_K_buscar_alineamiento_arm_file.s
Comment: ERROR used once
EXITO 00000000

Symbol: EXITO
   Definitions
      At line 23 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 79 in file conecta_K_buscar_alineamiento_arm_file.s
      At line 93 in file conecta_K_buscar_alineamiento_arm_file.s

MAX_COLUMNA 00000007

Symbol: MAX_COLUMNA
   Definitions
      At line 26 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 46 in file conecta_K_buscar_alineamiento_arm_file.s
Comment: MAX_COLUMNA used once
MAX_FILA 00000007

Symbol: MAX_FILA
   Definitions
      At line 25 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 44 in file conecta_K_buscar_alineamiento_arm_file.s
Comment: MAX_FILA used once
MAX_NO_CERO 00000006

Symbol: MAX_NO_CERO
   Definitions
      At line 27 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 51 in file conecta_K_buscar_alineamiento_arm_file.s
      At line 68 in file conecta_K_buscar_alineamiento_arm_file.s

MAX_TAMANYO_T_COLUMNAS 00000031

Symbol: MAX_TAMANYO_T_COLUMNAS
   Definitions
      At line 29 in file conecta_K_buscar_alineamiento_arm_file.s
   Uses
      At line 73 in file conecta_K_buscar_alineamiento_arm_file.s
Comment: MAX_TAMANYO_T_COLUMNAS used once
6 symbols
346 symbols in table
